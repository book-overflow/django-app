{% extends 'base.html' %}

{% block content %}
<div class="container" style="text-align: center; max-width: 600px; margin: auto; background-color: #f9f9f9; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <h2>Conversation with {% for user in other_users %}
        {{ user.get_full_name }}{% if not forloop.last %}, {% endif %}
    {% empty %}
        <p>No other participants found.</p>
    {% endfor %}</h2>
    <div class="messages" style="border: 1px solid #ccc; padding: 20px; background-color: #fff; color: #333;">
        {% for message in messages %}
        <div style="{% if message.sender == request.user %}text-align: right;{% else %}text-align: left;{% endif %} margin-bottom: 15px;">
            <strong style="color: #0056b3;">{{ message.sender.username }}</strong>:
            <p style="font-size: 16px; color: #444; line-height: 1.6; margin-top: 5px;">{{ message.text }}</p>
            <small style="font-size: 12px; color: #666;">{{ message.timestamp|date:"d M Y H:i" }}</small>
        </div>
        {% empty %}
        <p>No messages yet.</p>
        {% endfor %}
    </div>
    <form action="{% url 'view_conversation' conversation.id %}" method="post" style="margin-top: 20px;">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary" style="padding: 8px 16px; font-size: 14px;">Send</button>
    </form>
</div>
{% endblock %}
